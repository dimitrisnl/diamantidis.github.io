<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><title>Download provision profiles with applescript</title><!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Download provision profiles with applescript" />
<meta name="author" content="Ioannis Diamantidis" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to use applescript, or other Open Scripting Architecture(OSA) languages, like Javascript, to automate downloading provision profiles from Xcode" />
<meta property="og:description" content="How to use applescript, or other Open Scripting Architecture(OSA) languages, like Javascript, to automate downloading provision profiles from Xcode" />
<link rel="canonical" href="https://diamantidis.github.io/2018/11/25/download-provision-profiles-with-applescript" />
<meta property="og:url" content="https://diamantidis.github.io/2018/11/25/download-provision-profiles-with-applescript" />
<meta property="og:site_name" content="Ioannis Diamantidis" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-11-25T06:00:00+00:00" />
<script type="application/ld+json">
{"description":"How to use applescript, or other Open Scripting Architecture(OSA) languages, like Javascript, to automate downloading provision profiles from Xcode","@type":"BlogPosting","headline":"Download provision profiles with applescript","dateModified":"2018-11-25T06:00:00+00:00","datePublished":"2018-11-25T06:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://diamantidis.github.io/2018/11/25/download-provision-profiles-with-applescript"},"url":"https://diamantidis.github.io/2018/11/25/download-provision-profiles-with-applescript","author":{"@type":"Person","name":"Ioannis Diamantidis"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link rel="apple-touch-icon" href="/assets/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
<link rel="manifest" href="/assets/site.webmanifest">
<link rel="mask-icon" href="assets/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/browserconfig.xml">
<meta name="theme-color" content="#ffffff"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://diamantidis.github.io/feed.xml" title="Ioannis Diamantidis" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-121787430-1', 'auto');
  ga('send', 'pageview');
  ga('set', 'anonymizeIp', true);
}
</script>
  
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">
      <h1>Ioannis Diamantidis</h1>
    </a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about" title="About">About</a><a class="page-link" href="/archive" title="Archive">Archive</a><a class="page-link" href="/tags" title="Tags">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1>
      <span class="post-title">Download provision profiles with applescript</span>
    </h1>
    <div class="post-meta">
      <span class="post-date">
        November 25, 2018
      </span>
      <span class="post-divider">-</span>
      <span class="post-minutes">
        
        
          3 minute read
        
      </span>
      <span class="post-divider">-</span>
      <div class="post-tags">
        
          <a class="post-tag" href="/tags#Applescript">Applescript</a>
        
          <a class="post-tag" href="/tags#Xcode">Xcode</a>
        
          <a class="post-tag" href="/tags#Javascript">Javascript</a>
        
          <a class="post-tag" href="/tags#OSA">OSA</a>
        
      </div>
    </div>
  </header>

  <div class="post-content">
    <p>In my try to empty my To-do list, one item that caught my attention and I decided to give it a try is Applescript.</p>

<p>Applescript is a scripting language that allows us to interact with applications and many parts of the Mac OS.
Well, with applescript you can automate pretty much anything on a Mac OS.</p>

<p>AppleScript is an English-like language which contains words that are used in the every-day life thus making the writing of a script feels like creating a normal sentence. Due to that, it is quite easy to write, read and understand.</p>

<p>A few examples of what can be implemented with applescript are the following:</p>

<ul>
  <li>Show notification</li>
  <li>Turn sound on and off</li>
  <li>Open a program or a file with a specific program</li>
  <li>Send an email with the Mail app</li>
  <li>Empty the trash</li>
</ul>

<p>An <code class="highlighter-rouge">AppleScript</code> script can be written and run using the <code class="highlighter-rouge">Script Editor</code> application. Alternatively, the <code class="highlighter-rouge">osascript</code> command can be used to run the Applescript “script” like for example <code class="highlighter-rouge">osascript -e 'display notification "hello world!"'</code></p>

<h2 id="osascript">Osascript</h2>

<p>Osascript is a tool to run any script in an OSA(Open Scripting Architecture) language. More info about OSA can be found <a href="https://developer.apple.com/library/archive/documentation/AppleScript/Conceptual/AppleScriptX/Concepts/osa.html">here</a>.</p>

<p>To find out which OSA languages are installed on your system, you can run the <code class="highlighter-rouge">osalang</code> command. Two of the most popular such languages are <code class="highlighter-rouge">AppleScript</code> and <code class="highlighter-rouge">javascript</code>. The script can either be plain text or a compiled script (.scpt) created by Script Editor or <code class="highlighter-rouge">osacompile</code> command.
Plain text will be treated as Applescript, unless it is stated differently using the <code class="highlighter-rouge">-l</code> option. For more info about <code class="highlighter-rouge">osacript</code> you can refer to it’s <a href="https://ss64.com/osx/osascript.html">man page</a>.</p>

<h2 id="a-real-world-example">A “real world” example</h2>
<p>One of the tasks that I found interesting, is to automate the process needed to download and update the provisioning profiles in Xcode.</p>

<p>The process can be described with the following steps:</p>
<ul>
  <li>Open Xcode</li>
  <li>From the navigation menu, choose Preferences or alternative <code class="highlighter-rouge">Command</code> + <code class="highlighter-rouge">,</code>. A new dialog opens.</li>
  <li>Press the option “Accounts” from the the toolbar. The new window contains a list of all the appleIds on the left and details for each of them on the right.</li>
  <li>Press the appleId that you want. It opens the details.</li>
  <li>On the bottom right corner of the right pane, there is a button “Download Manual Profiles”</li>
  <li>Press the button</li>
</ul>

<h2 id="implementation-with-javascript">Implementation with Javascript</h2>
<p>First I start doing the implementation with Javascript, to get a better idea on how it is working.</p>

<p>The javascript implementation is the following:
<script src="https://gist.github.com/0d2a9e28c12d2f1b3d3c02e7f32c7019.js?file=javascript_download_profiles.scpt"> </script></p>

<p>This can be executed by running <code class="highlighter-rouge">osascript javascript_download_profiles.scpt</code>.
I would say that the documentation was not so good and there are not so many examples available online.</p>

<p>The library documentation can be found by pressing <code class="highlighter-rouge">Shift</code> + <code class="highlighter-rouge">Command</code> + <code class="highlighter-rouge">L</code> when using the 
<code class="highlighter-rouge">Script Editor</code>. It contains documentation for both Javascript and Applescript and how to use them to communicate with a lot of Mac OS apps.</p>

<p><img src="/assets/applescript/documentation.png" alt="script editor's documentation screenshot" /></p>

<p>On the first run of the script, you will get prompted to set Accessibility Access in System Preferences or you will get an error like <code class="highlighter-rouge">... execution error: Error on line X: Error: osascript is not allowed to send keystrokes. (1002)</code>.</p>

<p>To do so, go to <code class="highlighter-rouge">System Preferences</code> &gt; <code class="highlighter-rouge">Security &amp; Privacy</code> &gt; <code class="highlighter-rouge">Privacy</code> &gt; <code class="highlighter-rouge">Accessibility</code> and select the programs that you choose to run the script</p>

<p><img src="/assets/applescript/accessibility_permissions.png" alt="Accessibility permissions screenshot" /></p>

<h2 id="implementation-with-applescript">Implementation with Applescript</h2>

<p>After facing these issues with Javascript, I was more confident to start the applescript implementation which is the following:</p>

<script src="https://gist.github.com/c688cc192d9d525248f55da6602fb4ad.js?file=applescript_download_profiles.scpt"> </script>

<p>This can be executed by running <code class="highlighter-rouge">osascript applescript_download_profiles.scpt</code>.</p>

<h2 id="conclusion">Conclusion</h2>
<p>It’s always nice to experiment with technologies that you haven’t use before and at the same time to explore new options and possibilities to make your life easier by enabling you to automate processes. This post only scratches the surface of the applescript capabilities and I am looking forward to start using applescript to automate tasks that I do quite often. Furthermore, it is a great opportunity to get a better idea on how it works underneath with use of the apple events, Open Scripting Architecture and the language components.</p>

  </div>

  <div class="share">
    <strong>Share: </strong>
    
      
      
        <a href="//twitter.com/share?text=Download+provision+profiles+with+applescript&url=https%3A%2F%2Fdiamantidis.github.io%2F2018%2F11%2F25%2Fdownload-provision-profiles-with-applescript"
          onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
          <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      
      
      
    
      
      
      
        <a href="//www.facebook.com/sharer.php?t=Download+provision+profiles+with+applescript&u=https%3A%2F%2Fdiamantidis.github.io%2F2018%2F11%2F25%2Fdownload-provision-profiles-with-applescript"
          onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
          <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      
      
    
      
      
      
      
        <a href="//www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fdiamantidis.github.io%2F2018%2F11%2F25%2Fdownload-provision-profiles-with-applescript"
          onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;">
              <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
          </span>
        </a>
      
    
  </div><div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://diamantidis.github.io/2018/11/25/download-provision-profiles-with-applescript';
      this.page.identifier = 'https://diamantidis.github.io/2018/11/25/download-provision-profiles-with-applescript';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://ioannisblog-1.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></article>

      </div>
    </main><footer class="site-footer">
	<data class="u-url" href="/"></data>

  	<div class="footer-icons">
   		<ul>
    		



<li>
	<a href="https://github.com/diamantidis">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>


<li>
	<a href="http://linkedin.com/in/ioannis-diamantidis-04413273">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>



<li>
	<a href="/feed.xml">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>




<li>
	<a href="mailto:diamantidis@outlook.com">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>


    	</ul>
  	</div>
  	<div class="wrapper">
    	<p>Built with 
    		<i class="fa fa-heart" aria-hidden="true"></i>, <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://pages.github.com/"> Github Pages</a>
    	</p>
  		<p> © Copyright 2019 Ioannis Diamantidis </p>	
  	</div>
</footer>
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
	window.addEventListener("load", function(){
		window.cookieconsent.initialise({
			"palette": {
				"popup": {
					"background": "#B0C4DE"
				},
				"button": {
				    "background": "#f1d600"
				}
			},
			"content": {
				"message": "This website uses cookies to ensure you get the best experience and to provide the comment feature.",
    			"href": "/cookie_policy"
  			}
		})
	});

</script></body>

</html>
